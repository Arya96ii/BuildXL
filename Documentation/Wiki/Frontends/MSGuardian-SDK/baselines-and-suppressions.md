# Generating Baselines and Suppression files for BuildXL builds
## Automatic/Cloudbuild generation
To automatically generate baselines or suppressions pass `/p:[Tool.Guardian]genBaseline=1` for baselines or `/p:[Tool.Guardian]genSuppressions=1` for suppressions (but not both at once) as a command line argument to BuildXL.

Set `autoGeneratedBaselineSuppressionLocation` in the SDK arguments to the directory where the generated baselines/suppressions should be written. Then, depending on which of the above flags were passed in, set `baselineFileName` or `suppressionFileName` for the name of each baseline/suppression file to be generated for the given call to the Guardian SDK. 

Once the build completes, check the directory specified in `autoGeneratedBaselineSuppressionLocation` for the newly generated baselines/suppressions.

## Manual local only generation
The `guardian baseline` and `guardian suppress` commands can be used to baseline and suppress guardian violations. These must be run manually and committed to the repository.

1. Run BuildXL to get a failing build with Guardian violations.
2. Navigate to the output directory for the failing Guardian call (there will be a unique one for each call to Guardian.runGuardian()). The directory should be `Out/Objects/.../<unique directory>/guardianOut`.
3. Run the baseline or suppress command as described in the Guardian wiki with the addition of the following argument: `--settings-file .\buildxl.gdnsettings`
    * Example: `guardian baseline --settings-file .\buildxl.gdnsettings -f C:\repo\root\.config\guardian\buildxl_baseline`
4. Make sure to declare the new baseline or suppression files in the GuardianArguments structure.